(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,a){e.exports="data:image/png;base64,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"},34:function(e,a,t){e.exports=t(54)},54:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(28),o=t.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(14),i=t(15),c=t(6),d=t(7),u=t(10),m=t(8),h=t(9),g=t(16),v=t.n(g),f=t(21),p=t(4),b=t(23);b.initializeApp({apiKey:"AIzaSyBIAV6BNTlVCRRQRCIJoXK1JffGSzJI04s",authDomain:"test-db-2019.firebaseapp.com",databaseURL:"https://test-db-2019.firebaseio.com",projectId:"test-db-2019",storageBucket:"test-db-2019.appspot.com",messagingSenderId:"865151129219",appId:"1:865151129219:web:1c061ce31159e3c8"});var E=b,C=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).logout=t.logout.bind(Object(p.a)(t)),t.renderCarros=t.renderCarros.bind(Object(p.a)(t)),t.state={isLoading:!0,isAdmin:!1,nome:"",email:"",usuarioAuth:[],usuarioFire:{},carrosAlugados:[]},t.getUsuario(),t}return Object(h.a)(a,e),Object(d.a)(a,[{key:"logout",value:function(){E.auth().signOut()}},{key:"componentDidMount",value:function(){this.setState({isLoading:!0}),this.getUsuario(),console.log(this.state)}},{key:"getCarrosAdmin",value:function(){var e=Object(f.a)(v.a.mark(function e(){var a,t,n=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,this.state.usuarioFire.id;case 3:t=e.sent,console.log("idUsr: ",t),null!=t&&E.firestore().collection("carros").where("alugado","==",!0).get().then(function(e){e.forEach(function(e){var t={id:e.id,data:e.data()};a.push(t)}),n.setState({carrosAlugados:a,isLoading:!1})});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getCarrosByUsuario",value:function(){var e=Object(f.a)(v.a.mark(function e(){var a,t,n=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,this.state.usuarioFire.id;case 3:t=e.sent,console.log("idUsr: ",t),null!=t&&E.firestore().collection("carros").where("idUsuario","==",t).where("alugado","==",!0).get().then(function(e){e.forEach(function(e){var t={id:e.id,data:e.data()};a.push(t)}),n.setState({carrosAlugados:a,isLoading:!1})});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUsuario",value:function(){var e=Object(f.a)(v.a.mark(function e(){var a,t=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.firestore().collection("usuarios").get().then(function(e){var n;(a=E.auth().currentUser,t.setState({usuarioAuth:a}),console.log(t.state),null!=a)&&E.firestore().collection("usuarios").where("email","==",a.email).get().then(function(e){e.forEach(function(e){var a={id:e.id,data:e.data()};console.log(a.id,"==>",a.data),n=a}),t.setState({usuarioFire:n}),t.state.usuarioFire.data.admin?t.getCarrosAdmin():t.getCarrosByUsuario()})});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"cancelaCarro",value:function(e){var a,t,n=new Date;(t=n.getFullYear())<10&&(t="0"+t),(a=n.getMonth()+1)<10&&(a="0"+a);var r=n.getDate()+"/"+a+"/"+t;console.log("Voc\xea cancelou a reserva do carro: ",e),E.firestore().collection("carros").doc(e).update({alugado:!1,dataLiberado:r}).then(function(){window.location="/"})}},{key:"renderWelcome",value:function(){return r.a.createElement("div",{className:"row justify-content-between"},this.state.isLoading,r.a.createElement("div",{className:"col-auto"},r.a.createElement("h2",null,"Ol\xe1 ",this.state.usuarioFire.data.nome," !")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{onClick:this.logout,className:"btn btn-danger th-small-width button-logout"},"Logout")))}},{key:"renderCarros",value:function(e){var a=this;return console.log(e.id,"->",e.data),r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.data.modelo),r.a.createElement("td",null,e.data.marca),r.a.createElement("td",null,e.data.cor),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return a.cancelaCarro(e.id)}},"Cancelar")))}},{key:"renderCarrosAlugados",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Seus carros alugados:"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("th",{className:"th-small-width"},"Modelo"),r.a.createElement("th",{className:"th-big-width"},"Marca"),r.a.createElement("th",{className:"th-small-width"},"Cor"),r.a.createElement("th",{className:"th-small-width"})),r.a.createElement("tbody",null,this.state.carrosAlugados.map(this.renderCarros))))}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement("div",{className:"container"},"Carregando..."):(this.state.usuarioFire.data.admin,r.a.createElement("div",{className:"container"},this.renderWelcome(),this.renderCarrosAlugados()))}}]),a}(n.Component),y=t(30),N=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).login=t.login.bind(Object(p.a)(t)),t.signup=t.signup.bind(Object(p.a)(t)),t.handleChange=t.handleChange.bind(Object(p.a)(t)),t.state={email:"",password:"",nome:"",telefone:"",error:!1,signup:""},t}return Object(h.a)(a,e),Object(d.a)(a,[{key:"login",value:function(e){var a=this;e.preventDefault(),this.state.signup&&this.setState({signup:!1}),E.auth().signInWithEmailAndPassword(this.state.email,this.state.password).then(function(e){}).catch(function(e){console.log(e),a.setState({error:!0})})}},{key:"signup",value:function(e){var a=this;e.preventDefault(),this.state.signup?""!==this.state.nome&&""!==this.state.telefone?E.auth().createUserWithEmailAndPassword(this.state.email,this.state.password).then(E.firestore().collection("usuarios").doc().set({email:this.state.email,senha:this.state.password,nome:this.state.nome,telefone:this.state.telefone,admin:!1}).then()).catch(function(e){console.log(e),a.setState({error:!0})}):this.setState({error:!0}):this.setState({signup:!0})}},{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e,a,t;return e=this.state.error?r.a.createElement("small",null,"Email ou senha inv\xe1lidos!",r.a.createElement("br",null)):r.a.createElement("br",null),this.state.signup&&(a=r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Nome"),r.a.createElement("input",{type:"text",name:"nome",id:"nome",value:this.state.nome,onChange:this.handleChange,className:"form-control login-width",placeholder:"Nome...",required:!0})),t=r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Telefone"),r.a.createElement("input",{type:"text",name:"telefone",id:"telefone","data-mask":"(00) 0 0000-0000",value:this.state.telefone,onChange:this.handleChange,className:"form-control login-width",placeholder:"Telefone...",required:!0}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4"}),r.a.createElement("div",{className:"col-sm-4 styled-div"},r.a.createElement("form",{action:"",className:"styled-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange,className:"form-control login-width",placeholder:"Email...",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Senha"),r.a.createElement("input",{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange,className:"form-control login-width",placeholder:"Senha...",required:!0})),a,t,e,r.a.createElement("button",{type:"submit",className:"btn btn-primary button-form",onClick:this.login},"Login"),r.a.createElement("hr",{className:"hr"}),r.a.createElement("button",{className:"btn btn-secondary button-form",onClick:this.signup},"Cadastrar-se"))),r.a.createElement("div",{className:"col-sm-4"}))}}]),a}(n.Component),A=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).state={user:{}},t}return Object(h.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;E.auth().onAuthStateChanged(function(a){a?e.setState({user:a}):e.setState({user:null})})}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.user?r.a.createElement(C,null):r.a.createElement(N,null))}}]),a}(n.Component),w=t(31),j=t.n(w),k=function(e){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement("a",{className:"navbar-brand",href:"/"},r.a.createElement("img",{src:j.a,height:"30",alt:"logo.jpg"})),r.a.createElement("div",{className:"collapse navbar-collapse"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/",className:"nav-link"},"Principal")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/carros",className:"nav-link"},"Carros"))))))}}]),a}(n.Component),U=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).renderCarros=t.renderCarros.bind(Object(p.a)(t)),t.state={loading:!1,isAdmin:!1,email:"",data:[],usrData:[],perfil:[],usuarioFire:[]},t}return Object(h.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({loading:!0}),this.getUsuario()}},{key:"getUsuario",value:function(){var e,a=this;E.firestore().collection("usuarios").get().then(function(t){var n;(e=E.auth().currentUser,a.setState({usuarioAuth:e}),console.log(a.state),null!=e)&&E.firestore().collection("usuarios").where("email","==",e.email).get().then(function(e){e.forEach(function(e){var a=e.id,t=e.data();n={id:a,data:t}}),console.log(n.data.admin),n.data.admin?(a.setState({usrData:n,isAdmin:!0}),a.getCarrosDisponiveisAdmin()):(a.setState({usrData:n,isAdmin:!1}),a.getCarrosDisponiveis())})})}},{key:"getCarrosDisponiveis",value:function(){var e=this;console.log("\xc9 USU\xc1RIO");var a=[];E.firestore().collection("carros").orderBy("alugado").orderBy("dataLiberado").where("visivel","==",!0).get().then(function(t){t.forEach(function(e){var t={id:e.id,data:e.data()};a.push(t)}),e.setState({data:a,loading:!1})})}},{key:"getCarrosDisponiveisAdmin",value:function(){var e=this;console.log("\xc9 ADMIN!");var a=[];E.firestore().collection("carros").orderBy("alugado").orderBy("dataLiberado").get().then(function(t){t.forEach(function(e){var t={id:e.id,data:e.data()};a.push(t)}),e.setState({data:a,loading:!1})})}},{key:"alugaCarro",value:function(e){var a,t,n=new Date;(t=n.getFullYear())<10&&(t="0"+t),(a=n.getMonth()+1)<10&&(a="0"+a);var r=n.getDate()+7+"/"+a+"/"+t;console.log("Voc\xea reservou o carro: ",e),E.firestore().collection("carros").doc(e).update({alugado:!0,dataLiberado:r,idUsuario:this.state.usrData.id}).then(function(){window.location="/carros"})}},{key:"cancelaCarro",value:function(e){var a,t,n=new Date;(t=n.getFullYear())<10&&(t="0"+t),(a=n.getMonth()+1)<10&&(a="0"+a);var r=n.getDate()+"/"+a+"/"+t;console.log("Voc\xea cancelou a reserva do carro: ",e),E.firestore().collection("carros").doc(e).update({alugado:!1,dataLiberado:r}).then(function(){window.location="/carros"})}},{key:"renderCarrosAdmin",value:function(e){var a=this;return e.data.idUsuario===this.state.usrData.id?r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.data.modelo),r.a.createElement("td",null,e.data.marca),r.a.createElement("td",null,e.data.cor),r.a.createElement("td",null,e.data.preco),e.data.alugado?r.a.createElement("td",null,e.data.dataLiberado):r.a.createElement("td",null,"Sim"),e.data.alugado?r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){a.cancelaCarro(e.id)},className:"btn btn-danger btn-default-width"},"Cancelar")):r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){a.alugaCarro(e.id)},className:"btn btn-primary btn-default-width"},"Alugar"))):r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"th-big-width"},e.data.modelo),r.a.createElement("td",{className:"th-big-width"},e.data.marca),r.a.createElement("td",{className:"th-small-width"},e.data.cor),r.a.createElement("td",{className:"th-small-width"},e.data.preco),e.data.alugado?r.a.createElement("td",{className:"th-small-width"},e.data.dataLiberado):r.a.createElement("td",{className:"th-small-width"},"Sim"),e.data.alugado?r.a.createElement("td",{className:"th-small-width"},r.a.createElement("button",{onClick:function(){},className:"btn btn-secondary btn-default-width",disabled:!0},"Alugado")):r.a.createElement("td",{className:"th-small-width"},r.a.createElement("button",{onClick:function(){a.alugaCarro(e.id)},className:"btn btn-primary btn-default-width"},"Alugar")))}},{key:"renderCarros",value:function(e){var a=this;return this.state.isAdmin?r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.data.modelo),r.a.createElement("td",null,e.data.marca),r.a.createElement("td",null,e.data.cor),r.a.createElement("td",null,e.data.preco),e.data.alugado?r.a.createElement("td",null,e.data.dataLiberado):r.a.createElement("td",null,"Sim"),r.a.createElement("td",null,r.a.createElement(s.b,{to:"carros/".concat(e.id)},r.a.createElement("button",{className:"btn btn-primary btn-default-width"},"Editar")))):r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.data.modelo),r.a.createElement("td",null,e.data.marca),r.a.createElement("td",null,e.data.cor),r.a.createElement("td",null,e.data.preco),e.data.alugado?r.a.createElement("td",null,e.data.dataLiberado):r.a.createElement("td",null,"Sim"),e.data.alugado?e.data.idUsuario===this.state.usrData.id?r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){a.cancelaCarro(e.id)},className:"btn btn-danger btn-default-width"},"Cancelar")):r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){},className:"btn btn-danger btn-default-width",disabled:!0},"Alugado")):r.a.createElement("td",null,r.a.createElement(s.b,{to:"carros/".concat(e.id)},r.a.createElement("button",{className:"btn btn-primary btn-default-width"},"Alugar"))))}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{className:"container"},"Carregando..."):r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("th",{className:"th-big-width"},"Modelo")," ",r.a.createElement("th",{className:"th-big-width"},"Marca")," ",r.a.createElement("th",{className:"th-small-width"},"Cor")," ",r.a.createElement("th",{className:"th-small-width"},"Pre\xe7o"),r.a.createElement("th",{className:"th-small-width"},"Dispon\xedvel"),r.a.createElement("th",{className:"th-small-width"})),r.a.createElement("tbody",null,this.state.data.map(this.renderCarros))))}}]),a}(n.Component),S=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).handleChange=t.handleChange.bind(Object(p.a)(t)),t.changeState=t.changeState.bind(Object(p.a)(t)),t.state={modelo:"",usrData:{},marca:"",preco:"",visible:!0,carro:{},isAdmin:!1,loading:!0,carroId:"",checked:!0,changed:!1,dias:0,total:0,return:"Carro atualizado!",err:"Informe a quantidades de dias!"},t}return Object(h.a)(a,e),Object(d.a)(a,[{key:"componentWillMount",value:function(){this.getIdParams()}},{key:"componentDidMount",value:function(){this.getCarro()}},{key:"getUsuario",value:function(){var e,a=this;E.firestore().collection("usuarios").get().then(function(t){var n;(e=E.auth().currentUser,a.setState({usuarioAuth:e}),console.log(a.state),null!=e)&&E.firestore().collection("usuarios").where("email","==",e.email).get().then(function(e){e.forEach(function(e){var a=e.id,t=e.data();n={id:a,data:t}}),console.log(n.data.admin),n.data.admin?a.setState({usrData:n,loading:!1,isAdmin:!0}):a.setState({usrData:n,loading:!1,isAdmin:!1})})})}},{key:"handleChange",value:function(e){var a=e.target.id;if(this.setState({changed:!0}),"modelo"===a)console.log(this.state.modelo),this.setState({modelo:e.target.value});else if("marca"===a)console.log(this.state.marca),this.setState({marca:e.target.value});else if("dias"===a){var t=e.target.value*Number(this.state.preco);console.log(t),this.setState({dias:e.target.value,total:t})}else console.log(this.state.preco),this.setState({preco:e.target.value})}},{key:"changeState",value:function(){this.setState({checked:!this.state.checked,changed:!0})}},{key:"getIdParams",value:function(){console.log(this.props.match.params.id),this.setState({carroId:this.props.match.params.id})}},{key:"getCarro",value:function(){var e,a=this,t=this.state.carroId;E.firestore().collection("carros").doc(t).get().then(function(t){e=t.data(),a.setState({carro:e,modelo:e.modelo,marca:e.marca,preco:e.preco,visivel:e.visivel,checked:e.visivel})}),this.getUsuario()}},{key:"alugaCarro",value:function(e){var a,t,n=new Date;(t=n.getFullYear())<10&&(t="0"+t),(a=n.getMonth()+1)<10&&(a="0"+a);var r=n.getDate()+Number(this.state.dias)+"/"+a+"/"+t;0!==this.state.dias?(console.log("Voc\xea reservou o carro: ",e),E.firestore().collection("carros").doc(e).update({alugado:!0,dataLiberado:r,idUsuario:this.state.usrData.id,total:this.state.total}).then(function(){window.location="/carros"})):this.setState({err:"Dias n\xe3o podem ser vazios!"})}},{key:"salvarCarro",value:function(){var e=this,a=this.state.carro.id,t=this.state,n=t.modelo,r=t.marca,l=t.preco,o=t.checked;if(console.log("check:",o),this.state.changed){var s=this.state.carroId;E.firestore().collection("carros").doc(s).update({modelo:n,marca:r,preco:l,visivel:o}).then(function(a){e.setState({return:"Salvo com sucesso!"}),window.location="/carros"})}console.log(a)}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",null,"Carregando..."):this.state.isAdmin?r.a.createElement("div",{className:"row styled-div"},r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("form",{action:"",className:"form-group",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Modelo"),r.a.createElement("input",{defaultValue:this.state.carro.modelo,onChange:this.handleChange,type:"text",name:"modelo",id:"modelo",className:"form-control login-width"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Marca"),r.a.createElement("input",{defaultValue:this.state.carro.marca,onChange:this.handleChange,type:"text",name:"marca",id:"marca",className:"form-control login-width"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Placa"),r.a.createElement("input",{defaultValue:this.state.carro.placa,onChange:this.handleChange,type:"text",name:"placa",id:"placa",className:"form-control login-width",disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Pre\xe7o"),r.a.createElement("div",{className:"input-group mb-3  login-width"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},"R$")),r.a.createElement("input",{type:"text",defaultValue:this.state.carro.preco,onChange:this.handleChange,className:"form-control",placeholder:"00,00","aria-label":"Pre\xe7o","aria-describedby":"basic-addon1",name:"preco",id:"preco"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"/dia")))),r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{defaultChecked:this.state.carro.visivel,onChange:this.changeState,type:"checkbox",className:"custom-control-input",id:"customCheck1"}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck1"},"Deixar o carro vis\xedvel?")),r.a.createElement("div",{className:"alert alert-success  login-width",role:"alert"},this.state.return),r.a.createElement("hr",null),r.a.createElement("button",{type:"button",className:"btn btn-primary login-width",onClick:function(){e.salvarCarro()}},"Salvar")))):r.a.createElement("div",{className:"row styled-div"},r.a.createElement("div",{className:"col-sm-4 styled-div"},r.a.createElement("form",{action:"",className:"form-group",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Modelo"),r.a.createElement("input",{defaultValue:this.state.carro.modelo,onChange:this.handleChange,type:"text",name:"modelo",id:"modelo",className:"form-control login-width",disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Marca"),r.a.createElement("input",{defaultValue:this.state.carro.marca,onChange:this.handleChange,type:"text",name:"marca",id:"marca",className:"form-control login-width",disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Placa"),r.a.createElement("input",{defaultValue:this.state.carro.placa,onChange:this.handleChange,type:"text",name:"placa",id:"placa",className:"form-control login-width",disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Pre\xe7o"),r.a.createElement("div",{className:"input-group mb-3 login-width"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},"R$")),r.a.createElement("input",{type:"text",defaultValue:this.state.carro.preco,onChange:this.handleChange,className:"form-control",placeholder:"00,00","aria-label":"Pre\xe7o","aria-describedby":"basic-addon1",name:"preco",id:"preco",disabled:!0}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"/dia")))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Dias de aluguel"),r.a.createElement("input",{placeholder:"0",onChange:this.handleChange,type:"text",name:"dias",id:"dias",className:"form-control login-width",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Valor total"),r.a.createElement("input",{value:this.state.total,type:"text",name:"total",id:"total",className:"form-control login-width",disabled:!0})),r.a.createElement("div",null,r.a.createElement("h6",null,this.state.err)),r.a.createElement("hr",null),r.a.createElement("button",{type:"button",className:"btn btn-primary button-form",onClick:function(){e.alugaCarro(e.state.carroId)}},"Alugar"))))}}]),a}(n.Component);o.a.render(r.a.createElement(s.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(k,null),r.a.createElement(i.a,{exact:!0,path:"/",component:A}),r.a.createElement(i.a,{exact:!0,path:"/carros",component:U}),r.a.createElement(i.a,{exact:!0,path:"/carros/:id",component:S}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.a6dea099.chunk.js.map